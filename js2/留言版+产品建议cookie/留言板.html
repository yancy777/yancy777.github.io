<!DOCTYPE html>
<html>
	<head>
	<meta charset="UTF-8">
	<title>留言版</title>	
	<script src="js/addEventListener.js" ></script>
	<style type="text/css">
		*{margin:0; padding:0;}
		#box{width:100%; height:100%; position:fixed; top:0; background:black; filter:alpha(opacity=80);opacity:0.8; display:none;}
		#txtwindow{display:none; width:400px; height:300px; background:white; position:fixed; top:0; left:0; bottom:0; right:0; margin:auto; border:2px solid gray;}
		#biaoti{text-align:center; border-bottom:1px solid gray; height:30px;}
		#userName{width:300px;margin-right:30px;}
		#getText{width:300px; margin-left:60px; height:140px; border:1px solid black; display:block; margin-right:50px;}
		#biaoti{text-align:center;}
		#an1{margin-left:60px;float:left;}
		#an2{margin-left:20px;}
	</style>
	<script>
		window.onload=function(){	
			var delObj=document.getElementsByName("delthis"); 
			
			var	btn=document.getElementById("btn");
			var sure=document.getElementById("an1");
			var close=document.getElementById("an2");
			var tab=document.getElementById("tab");
			
			var _title=document.getElementById("biaoti");
			var  _text=document.getElementById("txtwindow");
			
			var tbody=document.getElementById("tab").children[0];
			addEvent(document,"click",function(evt){
				var e=evt||event;
				var q=e.target || e.srcElement;
				if(q.tagName == "A") {
					tbody.removeChild(q.parentNode.parentNode);
				}		
			},true);
			
			// for(var i=0;i<delObj.length;i++){
			// 	delObj[i].onclick=function(){
			// 		var tr=this.parentNode.parentNode;
			// 		var tbody=tr.parentNode;
			// 		tbody.removeChild(tr);
			// 	}				
			// }
			
			btn.onclick=function(){
				box.style.display="block";
				_text.style.display="block"; 
			}
			close.onclick=function(){
				box.style.display="none";
				_text.style.display = "none";
			}
			sure.onclick=function(){
				var uesrName=document.getElementById("userName").value;
				var contect=document.getElementById("getText").value;
				var td1=document.createElement("td");
				td1.innerHTML=userName.value;
				var td2=document.createElement("td");
				td2.innerHTML=contect;
				var td3=document.createElement("td");
				td3.innerHTML="1分钟前";
				var td4=document.createElement("td");
				var a=document.createElement("a");
				a.href="#";
				a.innerHTML="删除";
				td4.appendChild(a);
				var tr=document.createElement("tr");
				tr.appendChild(td1);
				tr.appendChild(td2);
				tr.appendChild(td3);
				tr.appendChild(td4);						
				tbody.appendChild(tr);			
				box.style.display="none";
				userName.value="";
				contect="";
				_text.style.display="none";
				
			}
			_title.onmousedown=function(evt){
				var e=evt||event;
				var reX=e.offsetX;
				var reY=e.offsetY;
				document.onmousemove=function(evt){
					var e=evt||event;
					_text.style.margin="0px";
					_text.style.left=e.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft)-reX+"px";
					_text.style.top=e.clientY + (document.documentElement.scrollTop || document.body.scrollTop)-reY+"px";
					e.preventDefault();
					
				}
			}
			_title.onmouseup=function(){
				document.onmousemove="";
			}
		}
	</script>
	</head>
	<body>
		<table id="tab" border="1" style="border-collapse:collapse;">
			<tr>
				<td>用户名</td>
				<td style="text-align:center;">留言内容</td>
				<td>时间</td>
				<td>操作</td>
			</tr>
			<tr>
				<td>user2</td>
				<td>留言内容留言内容留言内容留言内容留言内容留言内容</td>
				<td>5分钟前</td>
				<td><a href="#" name="delthis">删除</a></td>
			</tr>
			<tr>
				<td>user3</td>
				<td>留言内容留言内容留言内容留言内容留言内容留言内容</td>
				<td>5分钟前</td>
				<td><a href="#" name="delthis">删除</a></td>
			</tr>
			<tr>
				<td>user4</td>
				<td>留言内容留言内容留言内容留言内容留言内容留言内容</td>
				<td>5分钟前</td>
				<td><a href="#" name="delthis">删除</a></td>
			</tr>
			<tr>
				<td>user5</td>
				<td>留言内容留言内容留言内容留言内容留言内容留言内容</td>
				<td>5分钟前</td>
				<td><a href="#" name="delthis">删除</a></td>
			</tr>
			<tr>
				<td>user6</td>
				<td>留言内容留言内容留言内容留言内容留言内容留言内容</td>
				<td>5分钟前</td>
				<td><a href="#" name="delthis">删除</a></td>
			</tr>
		</table>
		<input type="button" id="btn" value="留言"/>
		<div id="box"></div>
		<div id="txtwindow" >		
			<h2 id="biaoti">留言板</h2>
			用户名：<input type="text" id="userName"/><br/>
			内容：<textarea id="getText"></textarea>
			<input type="button" id="an1" value="确定"/>
			<input type="button" id="an2" value="关闭"/>
		</div>
	</body>
</html>

