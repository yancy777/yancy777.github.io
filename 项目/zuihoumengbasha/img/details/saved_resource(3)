$(function () { $("#item_d_nav").find("a").click(function () { $(this).addClass("on").siblings("a").removeClass("on"); var H = $(this).data("index"); $(".Itemtb").each(function () { if ($(this).index() + 1 == H) { $(this).show().siblings("div.Itemtb").hide() } }) }); $(window).scroll(function () { $(".myinfo-tab-nolog").slideUp(1000); if ($(".right").offset().top < $(document).scrollTop() + 1) { $("#item_d_nav").find("h2").addClass("fixedup"); $(".goodsimp-addcartBtn").show(); $("#jgshow").show(); $("#item_d_nav").find("a").attr("href", "#contentBoxs") } else { $("#item_d_nav").find("h2").removeClass("fixedup"); $("#item_d_nav").find("a").removeAttr("href"); $(".goodsimp-addcartBtn").hide(); $("#jgshow").hide() } }); $("body").delegate("#J_tip", "mouseover mouseot", function (H) { var I = $("#J_over_sea"); if (event.type == "mouseenter") { I.removeClass("fn-none") } else { if (event.type == "mouseleave") { I.addClass("fn-none") } } }); var E = $("#hdOverseaType"); if (E.length > 0 && E.val() == 1) { var B = $('a[href="#contentbox5"]'); var G = $("#J_special_warn"); if (B.length > 0) { B.hide(); G.hide() } } var F = $("#hdQRCodeShowedSwitch").val(); if (F == 1) { $("#J_qr_code").show() } $(".seedpic").find("li").live("click", function () { if ($(this).prev().length == 0) { $(this).parent(".seedpic").siblings(".appearpic").children(".seedpicPre").hide() } else { $(this).parent(".seedpic").siblings(".appearpic").children(".seedpicPre").show() } if ($(this).next().length == 0) { $(this).parent(".seedpic").siblings(".appearpic").children(".seedpicNext").hide() } else { $(this).parent(".seedpic").siblings(".appearpic").children(".seedpicNext").show() } if (!$(this).hasClass("on")) { var H = $(this).attr("data-src"); $(this).addClass("on").siblings("li").removeClass("on"); $(this).parent(".seedpic").siblings(".appearpic").children("img").attr("src", H); $(this).parent(".seedpic").siblings(".appearpic").show("1000") } else { $(this).removeClass("on"); $(this).parent(".seedpic").siblings(".appearpic").hide("1000"); $(this).parent(".seedpic").siblings(".appearpic").children("img").removeAttr("src") } }); $(".appearpic").find("img").live("click", function () { $(this).parent(".appearpic").siblings(".seedpic").find("li.on").click() }); $(".seedpicPre").live("click", function () { $(this).parent(".appearpic").siblings(".seedpic").find("li.on").prev().click() }); $(".seedpicNext").live("click", function () { $(this).parent(".appearpic").siblings(".seedpic").find("li.on").next().click() }); $("#pointcom").click(function () { $("#bypointcom").click() }); var D = $("#hdStyleId").val(); function C() { $.get("/item/GetRecommendSpec", { styleCode: D, height: $("input[name='stature']").val(), weight: $("input[name='weight']").val() }, function (J, L, K) { if (!!J != "") { $("[name='inputstate']").html('<label>为您推荐：</label><div class="recommendSize" name="recSize">' + J.Specs + "</div>"); $(".p_info").find(".rcm-ico").remove(); $("table.sizeTable").find("td:[data-row = 'first'],td:[data-list = 'first']").removeClass("bgrow-On"); $("table.sizeTable").find("td").removeClass("bgsize-On"); $(".p_info").find("a:[mola='size']").each(function () { if ($(this).html() == J.Specs) { $(this).append('<div style="height:22px;width:34px;position:absolute;top: -15px;left: 12px;" class="rcm-ico jumpjump artwork double"><img src="http://i3.mbscss.com/img/moonbasa2/item/16022403.png"></div>') } }); $("table.sizeTable").find("td:[data-row = 'first']").each(function () { if ($(this).html() == J.Weight) { $(this).addClass("bgrow-On") } }); $("table.sizeTable").find("td:[data-list = 'first']").each(function () { if ($(this).html() == J.Height) { $(this).addClass("bgrow-On") } }); var H = $("table.sizeTable").find("td:[data-row = 'first'].bgrow-On").index(); var I = parseInt($("table.sizeTable").find("td:[data-list = 'first'].bgrow-On").attr("data-no")); $("table.sizeTable").find("tr").eq(I).find("td").eq(H).addClass("bgsize-On") } else { $("[name='inputstate']").html("没有找到合适尺码，请查看商品详情！") } }) } (function () { if ($.cookie("stature") != undefined && $.cookie("weight") != undefined) { $("input[name='stature']").val($.cookie("stature")); $("input[name='weight']").val($.cookie("weight")); C() } else { $(".sawidget-box").show() } })(); $("input[name='weight']").on("blur", function () { if ($(this).val() && $(this).siblings("input[name='stature']").val()) { var H = new Date(); H.setTime(H.getTime() + 365 * (24 * 60 * 60 * 1000)); $.cookie("stature", $(this).siblings("input[name='stature']").val(), { expires: H }); $.cookie("weight", $(this).val(), { expires: H }); $("input[name='weight']").val($.cookie("weight")); $("input[name='stature']").val($.cookie("stature")); C() } }); $("input[name='stature']").on("blur", function () { if ($(this).val() && $(this).siblings("input[name='weight']").val()) { var H = new Date(); H.setTime(H.getTime() + 365 * (24 * 60 * 60 * 1000)); $.cookie("stature", $(this).val(), { expires: H }); $.cookie("weight", $(this).siblings("input[name='weight']").val(), { expires: H }); $("input[name='weight']").val($.cookie("weight")); $("input[name='stature']").val($.cookie("stature")); C() } }); $("input[name='stature'],input[name='weight']").on("keyup", function (H) { if (H.keyCode == 13) { $(this).blur() } }); if ($(".sawidget-box").is(":visible")) { $(".sizeAid-widget").addClass("sizeAid-widget-on") } $(".boxClose").hover(function () { $(this).addClass("boxClose-on") }, function () { $(this).removeClass("boxClose-on") }).click(function () { $(this).parent(".sawidget-box").slideUp(); $(this).parents(".sizeAid-widget").removeClass("sizeAid-widget-on") }); function A() { $("#swTouch").addClass("lulu"); setTimeout("$('#swTouch').removeClass('lulu')", 1000) } $("#swTouch").mouseup(function (H) { A(); $(this).addClass("sizeAid-widget-on"); $(this).children(".sawidget-box").slideDown(); $(this).children(".sawidget-box").mouseup(function () { return false }); $(this).find(".boxClose").mouseup(function () { A() }) }) });
