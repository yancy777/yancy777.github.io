var itemCusCode = ""; $(function () { function B() { $.post("item/islogin", function (E) { E.Code == 2 && $(".orderList").html(cartnologin) && $(".accounts").remove() }) } $(".menu-ad,.lit-tab,.menu-cart").mouseover(function () { $(this).css({ "background": "#c10055" }); $(this).children(":first").show() }); $(".menu-ad,.lit-tab,.menu-cart").mouseout(function () { $(this).css({ "background": "" }); $(this).children(":first").hide() }); $(".menu-collect").click(function () { window.location.href = "http://member.moonbasa.com/fav/list#cn=15165&type=1&adsiteid=10000007" }); $(".menu-myinfo").mouseover(function () { $(".myinfo-icon-off").addClass("myinfo-icon-on") }); $(".menu-myinfo").mouseout(function () { $(".myinfo-icon-off").removeClass("myinfo-icon-on") }); $(".myinfo-close-out").mouseover(function () { $(".myinfo-close-out").addClass("myinfo-close-on") }); $(".myinfo-close-out").mouseout(function () { $(".myinfo-close-out").removeClass("myinfo-close-on") }); $(".c-close").mouseover(function () { $(this).children(":first").addClass("c-close-log-on") }); $(".c-close").mouseout(function () { $(this).children(":first").removeClass("c-close-log-on") }); $(".menu-cart").mouseout(function () { $(".menu-cart-case").hide() }); $(".c-close").click(function () { $(this).parent().animate({ left: "250px" }).fadeOut("fast") }); $(".menu-service").mouseover(function () { $(this).children(":first").next().addClass("service-icon-on") }); $(".menu-service").mouseout(function () { $(this).children(":first").next().removeClass("service-icon-on") }); $(".clo-btn").click(function () { window.location.href = "http://shopping.moonbasa.com/order/ordershopcart.aspx" }); $(window).delegate("#H-collect", "click", function () { window.location.href = "http://member.moonbasa.com/fav/list" }); $(window).delegate("#orders", "click", function () { window.location.href = "http://member.moonbasa.com/order/default" }); $(window).delegate(".classify-item", "mouseover", function () { $(this).find(".itemDes-del").show() }); $(window).delegate(".classify-item", "mouseout", function () { $(this).find(".itemDes-del").hide() }); $(".myinfo-close-out").click(function () { $(this).parent().hide() }); var D = $(window).height(); $(".J_right_menu,.menu-cart-case").css("height", D); var C = document.getElementById("scroll"); C.onclick = function () { var E = setInterval(function () { window.scrollBy(0, -500); if ($(window).scrollTop() == 0) { clearInterval(E) } }, 1) }; $(".menu-top").css({ "top": $(window).height() - 80 }); $(window).resize(function () { $(".right-fix-menu,.menu-cart-case").css({ "height": $(window).height() }); $(".menu-top").css({ "top": $(window).height() - 80 }); if ($(".menu-top").css("top") < "570") { $(".menu-top").css({ "top": 570 }) } }); $(".J_right_menu").show(); $(".menu-cart").mouseover(function () { if ($("#refreshJudge").data("needrefresh") == 1) { A(); $("#refreshJudge").data("needrefresh", "0") } $(".menu-cart-case").show(); $(".menu-cart-case").mouseover(function () { $(".menu-cart-case").show() }); $(".menu-cart-case").mouseout(function () { $(".menu-cart-case").hide() }) }); function A() { var E = '      <div class="myinfo-tab hide">        <div id="userinfo-main" class="myinfo-tab-main">        </div>        <div class="myinfo-tab-min">          <ul>            <li id="orders">我的订单</li>            <li style="width:1px; background:#e5e5e5"></li>            <li id="H-collect" style="width:136px;">我的收藏</li>          </ul>        </div>        <div class="myinfo-tab-po"></div>        <div class="myinfo-close-out"> × </div>      </div>'; var F = '<div class="myinfo-tab-nolog" style="display: none;">            <div class="myinfo-tab-main-nolog">                <img src="http://zone.moonbasa.com/content/images/User.jpg"/>                <p >请先登录哦！</p>                <div style="overflow:hidden;margin:0 auto;width:194px;">                    <a class="mylogin" href="http://login.moonbasa.com">登录</a>                    <a class="myreg" href="http://login.moonbasa.com/Home/register">注册</a>                </div>            </div>            <div class="myinfo-tab-min">                <ul>                    <li id="orders">我的订单</li>                    <li style="width: 1px; background: #e5e5e5"></li>                    <li id="H-collect" style="width: 136px;">我的收藏</li>                </ul>            </div>            <div class="myinfo-tab-po">            </div>            <div class="myinfo-close-out">                ×</div>        </div>'; $.ajax({ url: ShoppingCartDomain + "/ShoppingHandler/GetCartGroupInfo", dataType: "jsonp", success: function (J) { if (J.action != null) { window.itemCusCode = J.action.CusCode; function I(G) { var P = $("#J_userinfo_tpl").html(); var N = JSON.parse(G); N.CusGradeName = getCusGradeName(N.CusGradeId); var O = easyTemplate(P, N).toString(); $("#userinfo-main").html(O); getUserHead(window.itemCusCode, H) } function H(G) { if (G && G.Data && G.Data.length > 0 && G.Data[0].Photo) { $(".myinfo-header").find("img").attr("src", G.Data[0].Photo) } } getUserinfoData(I); $(".menu-myinfo").prepend(E) } else { $(".menu-myinfo").prepend(F) } $("p.number").html(J.GroupCartCount || 0); if (J.cartInfoGroup.length != 0) { $(".orderList").show(); $(".accounts").show(); $("#cartNothings").hide(); var M = $("#J_goods_list_tpl").html(); var L = easyTemplate(M, J.cartInfoGroup).toString(); $("#order-List").html(L); $("span.cartSum-h").html(J.GroupCartCount || 0); $("#carpricesums").html(J.GroupSumAmount || 0); var K = $("span:[mola=remove]"); K.click(function () { var P = $(this).attr("warecode"), G = $(this).attr("kitorder"); if (confirm("你确定要删除此商品么？")) { $.ajax({ dataType: "jsonp", url: ShoppingCartDomain + "/shoppinghandler/removecartitem", data: { warecode: P, kitorder: G }, success: function (N) { A() } }) } return false }) } else { $(".orderList").hide(); $(".accounts").hide(); $("#cartNothings").show() } } }) } A(); $("#Imrobot").click(function () { if (!$("#dlgsvr")[0]) { $('<div id="dlgsvr" style="width:705px;height:510px"><iframe src="http://help.moonbasa.com/robot2/robot#cn=18580&type=1&adsiteid=10000007" style="width:700px;height:505px;border:0" frameborder="0"></iframe></div>').hide().appendTo($("body")) } $("#dlgsvr").dialog({ autoOpen: true, title: "梦芭莎在线客服", width: 720, modal: true, resizable: false }); $(window).scrollTop($(window).scrollTop() - 1); return false }) }); function getUserinfoData(A) { $.ajax({ url: MemberDomain + "/async/getcustinfo", dataType: "jsonp", success: A }) } function getUserHead(A, B) { $.ajax({ dataType: "jsonp", url: "http://zone.moonbasa.com/home/getUserHead", data: { uid: A }, success: B }) } function getCusGradeName(A) { A = parseInt(A); switch (A) { case 0: return "普通会员"; case 1: return "白金VIP"; case 2: return "零售VIP"; case 3: return "普通VIP"; case 4: return "淘宝代理A"; case 5: return "淘宝代理B"; case 6: return "内部员工"; case 7: return "米兰网"; case 8: return "eBay网代理(美国)"; case 9: return "爱米诺"; case 10: return "深圳大盒子"; case 11: return "悠丽"; case 12: return "移动e店"; case 13: return "eBay网代理(英国)"; case 14: return "网购达人"; case 15: return "ebay英国店"; case 16: return "摩拉员工账户"; case 17: return "满200客户"; case 18: return "满300客户"; case 19: return "满400客户"; case 20: return "满500客户"; case 21: return "走秀网"; case 22: return "8折代理商"; case 23: return "ebay网代理(AU)"; case 24: return "TOPBUY"; case 25: return "内部员工A"; case 26: return "内部员工账户A"; case 27: return "内部员工8折账户"; case 28: return "贵宾客户"; case 29: return "京东(广州)"; case 30: return "京东(上海)"; case 31: return "京东(北京)"; case 32: return "京东(武汉)"; case 33: return "京东(成都)"; case 34: return "超级VIP"; case 35: return "海外代理1"; case 36: return "海外代理2"; case 37: return "钻石VIP"; case 38: return "海外代理3"; case 39: return "白金VIP9.5折"; case 40: return "MBS-白金VIP"; case 41: return "普通客户"; case 42: return "35"; case 43: return "淘宝第三方代理"; case 44: return "广佛智城代理"; case 45: return "趣分期" } };